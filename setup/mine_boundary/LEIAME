#    Scrip para remapear saídas do MOM6 global para o regional
#    Inputs: arquivo netcdf saídas do global + grade regional
#    Desenvolvido por Nicole C. Laureanti
#    nlaureanti@gmail.com
#    <https://nlaureanti.notion.site/Cria-o-de-BC-com-grads-cdo-f6099514a11048c7803f9d07bac470f4>


Passo 0: Executar modelo global e criar arquivos .ddf para as saídas (permitindo que se abram no GrADs

cdo -settaxis,1900-01-01,00:00:00,1day 19491201.prog_ts.nc prog_ts.nc

#se usou saídas noleap, usar ddf de entrada
echo "dset ^prog_ts.nc
options  365_day_calendar
tdef Time 31 linear 01jan1900 1dy" > prog_ts.ddf

ncks -v u 19000101.prog_z_v.nc prog_v.nc   #cdo -selvar,u 19491201.prog.nc prog_u.nc
ncks -v v 19000101.prog_z_v.nc prog_v.nc   #cdo -selvar,v 19491201.prog.nc prog_v.nc  https://linux.die.net/man/1/ncks ou http://nco.sourceforge.net/nco.html


#se usou noleap:
echo "dset ^prog_u.nc
options  365_day_calendar
tdef Time 31 linear 01jan1900 1dy" > prog_u.ddf
echo "dset ^prog_v.nc
options  365_day_calendar
tdef Time 31 linear 01jan1900 1dy" > prog_v.ddf


Passo 1: executar a parte do python e exportar arquivos de grade recortado

scp output_prog_p/{south,north,east}* nicole.cristine@tupa.cptec.inpe.br:/scratchin/grupos/apgmet/home/nicole.cristine/create_obc_cdo


Passo 2: Alterar o cabeçalho do script   *.ddf ou *.nc

dir_saida='output_prog_p'

#Global model definitions
dirdata="$SUBMIT_HOME/exp_mom6/exp_global_group0911/dirs_scratchout"
fname_ts='prog_ts.ddf' #para u e v ele vai selecionar prog_$v.ddf
vvars='h temp salt SSH u v'

#Regional model definitions
fgrid="$SUBMIT_HOME/exp_mom6/exp_AScoast_cdo/workdir/INPUT/ocean_hgrid.nc” #USAR SUPERGRID


Passo 3: observar os arquivos gerados com o .ddf correspondente
